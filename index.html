<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link rel="stylesheet" href="index.css">
  
  <title>Frontend Mentor | Age calculator app</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
  </style>
</head>
<body>
  <div id="container">
    <div id="box-container">
      <div id="input-container">
        <div id="inputs">
          <label>DAY</label>
          <input type="number" id="day" min="1" max="31" onchange="updateInput(this.value)"/>
        </div>
        <div id="inputs">
          <label>MONTH</label>
          <input type="number" id="month" min="1" max="12" onchange="updateInput(this.value)"/>
        </div>
        <div id="inputs">
          <label>YEAR</label>
          <input type="number" id="year" min="1" onchange="updateInput(this.value)"/>
        </div>
      </div>
      <div id="submit">
        <button id="submit-btn" onclick="submit()"><i class="fa fa-angle-down" style="font-size:30px; color:white;"></i></button>
      </div>
      <div id="output-container">
        <div id="years-container">
          <p id="p-years">--</p><p>years</p>
        </div>
        <div id="months-container">
          <p id="p-months">--</p><p>months</p>
        </div>
        <div id="days-container">
          <p id="p-days">--</p><p>days</p>
        </div>
      </div>
    </div>
  </div>  
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Your Name Here</a>.
  </div>
  <script>
    const getDay = document.getElementById('day')
    const getMonth = document.getElementById('month')
    const getYear = document.getElementById('year')
    
    const resDay = document.getElementById('p-days')
    const resMonth = document.getElementById('p-months')
    const resYear = document.getElementById('p-years')
    
    function submit(){
      // tanggal lahir
      const birthDate = new Date(`${getYear.value}-${getMonth.value}-${getDay.value}`);

      // tanggal hari ini
      const today = new Date();

      // selisih waktu dalam tahun, bulan, dan hari
      let diffYear = today.getFullYear() - birthDate.getFullYear();
      let diffMonth = today.getMonth() - birthDate.getMonth();
      let diffDay = today.getDate() - birthDate.getDate();

      // jika hari lahir di akhir bulan, atur selisih bulan menjadi 1
      if (diffDay < 0) {
        diffMonth--;
        diffDay += new Date(today.getFullYear(), today.getMonth(), 0).getDate();
      }

      // jika bulan lahir di akhir tahun, atur selisih tahun menjadi 1 dan selisih bulan menjadi 0
      if (diffMonth < 0) {
        diffYear--;
        diffMonth += 12;
      }

      // menampilkan umur dengan detail
      resDay.innerHTML = diffDay
      resMonth.innerHTML = diffMonth
      resYear.innerHTML = diffYear
    }

    function updateInput(val){
      console.log('ini hari', day)
      console.log('ini bulan', month)
      console.log('ini tahun', year)

      val = parseInt(val)
      const month31 = [1,3,5,7,8,10,12]
      const month30 = [4,6,8]
      const month29 = [2]


      if(month31.includes(val)){
        getDay.value = getDay.value < 32 ? getDay.value : 31
      }
      if(month30.includes(val)){
        getDay.value = getDay.value < 31 ? getDay.value : 30
      }
      if(month29.includes(val)){
        if(getYear.value % 4 == 0){
          getDay.value = getDay.value < 30 ? getDay.value : 29
        } else {
          getDay.value = getDay.value < 29 ? getDay.value : 28
        }
      }

    }
    
  </script>
</body>
</html>